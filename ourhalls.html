<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />

    <title>EBB Sanat Merkezi</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />

    <link rel="stylesheet" href="css/global.css" />

    <style>
      /* Override Bootstrap dropdown styles for our custom dropdown */
      .nav-item.has-dropdown .dropdown-menu {
        display: block !important;
        opacity: 0 !important;
        visibility: hidden !important;
        transform: translateY(-10px) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
      }
      
      .nav-item.has-dropdown:hover .dropdown-menu,
      .nav-item.has-dropdown.active .dropdown-menu {
        opacity: 1 !important;
        visibility: visible !important;
        transform: translateY(0) !important;
      }
      
      :root {
        --primary-color: #2c5aa0;
        --secondary-color: #4a90c2;
        --accent-color: #f39c12;
        --text-dark: #2c3e50;
        --text-light: #7f8c8d;
        --bg-light: #f8f9fa;
        --bg-white: #ffffff;
        --shadow-light: 0 2px 10px rgba(0, 0, 0, 0.1);
        --shadow-medium: 0 4px 20px rgba(0, 0, 0, 0.15);
        --shadow-heavy: 0 8px 30px rgba(0, 0, 0, 0.2);
        --border-radius: 12px;
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        scroll-behavior: smooth;
        font-size: 16px;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
        line-height: 1.6;
        color: var(--text-dark);
        background-color: var(--bg-white);
        overflow-x: hidden;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .hero-banner {
        background: linear-gradient(
            135deg,
            rgba(5, 99, 193, 0.85),
            rgba(3, 48, 92, 0.85)
          ),
          url("assets/hero-halls.jpg") center/cover no-repeat;
        color: #fff;
        border-radius: 24px;
        padding: 3rem;
        box-shadow: 0 20px 35px rgba(0, 0, 0, 0.25);
        margin-top: 0;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      .hero-banner h1 {
        font-weight: 700;
      }

      .hero-banner p {
        max-width: 720px;
      }

      .hall-collections {
        margin-top: 3rem;
        display: flex;
        flex-direction: column;
        gap: 2.5rem;
      }

      .hall-group {
        background: #ffffff;
        border-radius: 24px;
        padding: 2.25rem;
        box-shadow: 0 15px 35px rgba(15, 76, 129, 0.12);
        border: 1px solid rgba(44, 90, 160, 0.08);
      }

      .hall-group-header {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        margin-bottom: 2rem;
      }

      .hall-group-header .badge {
        align-self: flex-start;
        font-size: 0.95rem;
        letter-spacing: 0.5px;
      }

      .hall-group-header h2 {
        margin: 0;
        font-size: clamp(1.5rem, 3vw, 2rem);
        color: var(--text-dark);
      }

      .hall-group-header p {
        margin: 0;
        color: var(--text-light);
      }

      .hall-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 1rem;
      }

      .hall-item {
        width: 100%;
        border: 1px dashed rgba(44, 90, 160, 0.35);
        border-radius: 16px;
        padding: 1.25rem;
        background: rgba(44, 90, 160, 0.04);
        color: var(--text-dark);
        font-weight: 600;
        font-size: 1rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        cursor: not-allowed;
        pointer-events: none;
      }

      .hall-item i {
        color: var(--primary-color);
      }

      .hall-note {
        margin-top: 1.25rem;
        padding: 0.75rem 1rem;
        background: rgba(243, 156, 18, 0.1);
        border-radius: 12px;
        color: #b26a00;
        font-size: 0.9rem;
      }

      @media (max-width: 768px) {
        .hall-group {
          padding: 1.5rem;
        }
      }
    </style>

    <script type="module" src="js/index.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body class="has-fixed-header">
    <!-- Header -->
    <header class="header">
      <nav class="nav container">
        <a href="index.html" class="logo">
          <img src="assets/Asset 1.png" alt="EBB Logo" />
          <span>EBB Kültür Sanat</span>
        </a>

        <ul class="nav-menu" id="navMenu">
          <li><a href="index.html" class="nav-link">Ana Sayfa</a></li>
          <li><a href="calendar.html" class="nav-link">Etkinliklerimiz</a></li>
          <li>
            <a href="ourhalls.html" class="nav-link active">Salonlarımız</a>
          </li>
          <li><a href="news-list.html" class="nav-link">Haberler</a></li>
          <li class="nav-item has-dropdown">
            <a href="#" class="nav-link has-dropdown">Formlar</a>
            <ul class="dropdown-menu" id="formsDropdown">
              <li>
                <a
                  href="anadolunun-renkleri-form.html"
                  class="dropdown-item"
                  >Anadolunun Renkleri Başvuru Formu</a
                >
              </li>
            </ul>
          </li>
          <li><a href="index.html#contact" class="nav-link">İletişim</a></li>
        </ul>

        <button class="mobile-menu-btn" id="mobileMenuBtn">
          <i class="fas fa-bars"></i>
        </button>
      </nav>
    </header>

    <main class="container mb-5">
      <section class="hero-banner">
        <span class="badge bg-warning text-dark mb-3 px-3 py-2"
          >Salonlarımız</span
        >
        <h1>Şehrin kültür kalbini keşfedin</h1>
        <p class="lead mb-0">
          Erzurum Büyükşehir Belediyesi'nin iki ayrı kültür merkezi, tiyatrodan
          seminerlere kadar her türlü etkinlik için özel olarak tasarlanmış
          salonlar ve geniş fuaye alanlarıyla hizmetinizde. Kapasite ve teknik
          detaylar kısa süre içinde güncellenecektir.
        </p>
      </section>

      <section class="hall-collections">
        <div class="hall-group">
          <div class="hall-group-header">
            <div>
              <h2>İbrahim Erkal Dadaş Kültür Sanat Merkezi</h2>
              <p>
                Şehrimizin en büyük salonlarını barındıran merkezimizde,
                katmanlı detaylar ve fotoğraflar çok yakında paylaşılacak.
              </p>
            </div>
          </div>
          <div class="hall-list">
            <div class="hall-item">
              <i class="fas fa-theater-masks"></i>
              <span>Büyük Salon</span>
            </div>
            <div class="hall-item">
              <i class="fas fa-chair"></i>
              <span>Küçük Salon</span>
            </div>
            <div class="hall-item">
              <i class="fas fa-people-roof"></i>
              <span>Fuaye Alanı</span>
            </div>
          </div>
        </div>

        <div class="hall-group">
          <div class="hall-group-header">
            <div>
              <h2>Necip Fazıl Kısakürek Kültür Merkezi</h2>
              <p>
                Seminerlerden konserlere kadar farklı ölçekte mekanlarımızı tek
                bakışta keşfedin. Detaylar hazırlandığında tıklayarak açılacak.
              </p>
            </div>
          </div>
          <div class="hall-list">
            <div class="hall-item">
              <i class="fas fa-music"></i>
              <span>Büyük Salon</span>
            </div>
            <div class="hall-item">
              <i class="fas fa-chalkboard-teacher"></i>
              <span>Seminer Salonu 1</span>
            </div>
            <div class="hall-item">
              <i class="fas fa-users-gear"></i>
              <span>Seminer Salonu 2</span>
            </div>
            <div class="hall-item">
              <i class="fas fa-people-roof"></i>
              <span>Fuaye Alanı</span>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer" id="siteFooter">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h3>EBB Kültür Sanat Merkezi</h3>
            <p>
              Erzurum'un kültürel yaşamının kalbi olan merkezimizde, sanat ve
              kültürün her dalında etkinlikler düzenliyoruz.
            </p>
            <div class="social-links">
              <a
                href="https://www.facebook.com/EbbSanatMerkezi"
                class="social-link"
                target="_blank"
              >
                <i class="fab fa-facebook-f"></i>
              </a>
              <a
                href="https://www.instagram.com/ebbsanatmerkezi"
                class="social-link"
                target="_blank"
              >
                <i class="fab fa-instagram"></i>
              </a>
              <a
                href="https://twitter.com/erzurumbld"
                class="social-link"
                target="_blank"
                rel="noopener"
              >
                <i class="fab fa-twitter"></i>
              </a>
              <a
                href="https://www.youtube.com/@erzurumbuyuksehirbelediyes2404"
                class="social-link"
                target="_blank"
                rel="noopener"
              >
                <i class="fab fa-youtube"></i>
              </a>
            </div>
          </div>

          <div class="footer-section">
            <h3>Hızlı Linkler</h3>
            <p><a href="#home">Ana Sayfa</a></p>
            <p><a href="calendar.html">Programlar</a></p>
            <p><a href="#features">Hizmetler</a></p>
            <p><a href="ourhalls.html">Salonlarımız</a></p>
            <p><a href="activity.html">Yönetim Paneli</a></p>
          </div>

          <div class="footer-section">
            <h3>İletişim</h3>
            <p><i class="fas fa-phone"></i> +90 (442) 233 33 23</p>
            <p><i class="fas fa-envelope"></i> bilgi@ebbkultursanat.com</p>
            <p><i class="fas fa-clock"></i> Pzt-Cum: 09:00-18:00</p>
            <p>
              <i class="fas fa-map-marker-alt"></i> Muratpaşa Mah. Cumhuriyet
              Cad. Erzincankapı Sok. Dadaş Sitesi 1/1 Yakutiye Erzurum
            </p>
          </div>

          <div class="footer-section">
            <h3>Bağlı Kuruluşlar</h3>
            <p>
              <a href="https://www.erzurum.bel.tr" target="_blank"
                >Erzurum Büyükşehir Belediyesi</a
              >
            </p>
            <p>
              <a href="https://www.ktb.gov.tr/" target="_blank" rel="noopener"
                >Kültür ve Turizm Bakanlığı</a
              >
            </p>
            <p>
              <a
                href="http://www.erzurum.gov.tr/"
                target="_blank"
                rel="noopener"
                >Erzurum Valiliği</a
              >
            </p>

            <p>
              <a
                href="https://erzurumdiplomasi.org/"
                target="_blank"
                rel="noopener"
                >Erzurum Diplomasi Akademisi</a
              >
            </p>

            <p>
              <a
                href="https://www.bilimerzurum.org/"
                target="_blank"
                rel="noopener"
                >Bilim Erzurum</a
              >
            </p>
          </div>
        </div>

        <div class="footer-bottom">
          <p>&copy; 2024 EBB Kültür ve Sanat Merkezi. Tüm hakları saklıdır.</p>
        </div>
      </div>
    </footer>

    <script src="js/main.js"></script>
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
      import {
        getFirestore,
        collection,
        getDocs,
      } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";

      const firebaseConfig = {
        apiKey: "AIzaSyD978ixFjE9KVlNsm6-BYww3B6S4qPVLfQ",
        authDomain: "ebbkultursanatapp.firebaseapp.com",
        projectId: "ebbkultursanatapp",
        storageBucket: "ebbkultursanatapp.appspot.com",
        messagingSenderId: "540910775157",
        appId: "1:540910775157:web:4af35312414acf20bd013c",
        measurementId: "G-4JCKV13ER8",
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // Load active forms for dropdown
      async function loadActiveForms() {
        try {
          console.log("Loading active forms...");
          const formsSnapshot = await getDocs(collection(db, "forms"));
          const activeForms = [];
          
          formsSnapshot.forEach((doc) => {
            const formData = doc.data();
            const isActive = formData.isActive !== false; // Default to true
            
            // Check if form has expired
            let isExpired = false;
            if (formData.endDate) {
              const endDate = formData.endDate?.toDate 
                ? formData.endDate.toDate() 
                : new Date(formData.endDate);
              isExpired = new Date() > endDate;
            }
            
            // Only add active and not expired forms
            if (isActive && !isExpired) {
              activeForms.push({
                id: formData.id || doc.id,
                title: formData.title || "Form",
              });
            }
          });

          console.log("Active forms found:", activeForms);

          // Update dropdown menu - try multiple times if needed
          let dropdownMenu = document.getElementById("formsDropdown");
          let attempts = 0;
          while (!dropdownMenu && attempts < 20) {
            await new Promise(resolve => setTimeout(resolve, 100));
            dropdownMenu = document.getElementById("formsDropdown");
            attempts++;
          }
          
          console.log("Dropdown menu element:", dropdownMenu, "after", attempts, "attempts");
          
          if (dropdownMenu && activeForms.length > 0) {
            const formsHTML = activeForms
              .map(
                (form) =>
                  `<li><a href="form-application.html?id=${form.id}" class="dropdown-item">${form.title}</a></li>`
              )
              .join("");
            dropdownMenu.innerHTML = formsHTML;
            // Force CSS to ensure dropdown is visible on hover
            dropdownMenu.style.display = '';
            dropdownMenu.style.opacity = '';
            dropdownMenu.style.visibility = '';
            console.log("Dropdown menu updated with", activeForms.length, "forms");
            console.log("Dropdown menu HTML:", dropdownMenu.innerHTML);
            console.log("Dropdown menu children:", dropdownMenu.children.length);
          } else if (dropdownMenu && activeForms.length === 0) {
            dropdownMenu.innerHTML =
              '<li><span class="dropdown-item text-muted">Aktif form bulunmamaktadır</span></li>';
            console.log("No active forms found");
          } else {
            console.warn("Dropdown menu element not found after", attempts, "attempts!");
            // Try one more time after a longer delay
            setTimeout(async () => {
              const retryMenu = document.getElementById("formsDropdown");
              if (retryMenu && activeForms.length > 0) {
                retryMenu.innerHTML = activeForms
                  .map(
                    (form) =>
                      `<li><a href="form-application.html?id=${form.id}" class="dropdown-item">${form.title}</a></li>`
                  )
                  .join("");
                console.log("Dropdown menu updated on retry");
              }
            }, 1000);
          }
        } catch (error) {
          console.error("Error loading active forms:", error);
        }
      }

      // Load forms after page is fully loaded
      if (document.readyState === 'loading') {
        document.addEventListener("DOMContentLoaded", () => {
          // Wait a bit for other scripts to finish
          setTimeout(() => {
            loadActiveForms();
          }, 500);
        });
      } else {
        // DOM already loaded
        setTimeout(() => {
          loadActiveForms();
        }, 500);
      }
    </script>
  </body>
</html>
